(function(f){f.fn.carousel=function(t){var a={duration:300,direction:"horizontal",minimumDrag:20,beforeStart:function(){},afterStart:function(){},beforeStop:function(){},afterStop:function(){},onShowPage:function(){}};f.extend(a,t||{});this.getPageIndex=function(){if(this.length>0)return this[0].getPageIndex();return null};this.getPageCount=function(){if(this.length>0)return this[0].getPageCount();return null};this.flipForward=function(){this.length>0&&this[0].flipForward()};this.flipBackward=function(){this.length>
0&&this[0].flipBackward()};return this.each(function(){if(this.tagName.toLowerCase()=="ul"){var l=f(this),g=l.children(),j=l.parent().width(),m=l.parent().height(),n={position:"relative",overflow:"hidden",width:j,height:m},u={position:"relative",padding:"0",margin:"0",listStyle:"none",width:g.length*j},o={width:j,height:m};n=f("<div>").css(n);var b=f("<ul>").css(u),d=1,h,i;if(a.direction.toLowerCase()==="horizontal"){b.css({cssFloat:"left"});f.each(g,function(){var c=f("<li>").css(f.extend(o,{cssFloat:"left"})).html(f(this).html());
b.append(c)});var p=function(){b.animate({left:-1*j*d},a.duration);d++;a.onShowPage()},q=function(){b.animate({left:-1*j*(d-2)},a.duration);d--;a.onShowPage()};b.draggable({axis:"x",start:function(c){a.beforeStart.apply(b,arguments);var e=c.originalEvent.touches?c.originalEvent.touches[0]:c;h={coords:[e.pageX,e.pageY]};a.afterStart.apply(b,arguments)},stop:function(c){function e(){return Math.abs(h.coords[0]-i.coords[0])}a.beforeStop.apply(b,arguments);var k=c.originalEvent.touches?c.originalEvent.touches[0]:
c;i={coords:[k.pageX,k.pageY]};if(h.coords[0]>i.coords[0])d===g.length||e()<a.minimumDrag?b.animate({left:"+="+e()},a.duration):p();else d===1||e()<a.minimumDrag?b.animate({left:"-="+e()},a.duration):q();a.afterStop.apply(b,arguments)}})}else if(a.direction.toLowerCase()==="vertical"){f.each(g,function(){var c=f("<li>").css(o).html(f(this).html());b.append(c)});var r=function(){b.animate({top:-1*m*d},a.duration);d++;a.onShowPage()},s=function(){b.animate({top:-1*m*(d-2)},a.duration);d--;a.onShowPage()};
b.draggable({axis:"y",start:function(c){a.beforeStart.apply(b,arguments);var e=c.originalEvent.touches?c.originalEvent.touches[0]:c;h={coords:[e.pageX,e.pageY]};a.afterStart.apply(b,arguments)},stop:function(c){function e(){return Math.abs(h.coords[1]-i.coords[1])}a.beforeStop.apply(b,arguments);var k=c.originalEvent.touches?c.originalEvent.touches[0]:c;i={coords:[k.pageX,k.pageY]};if(h.coords[1]>i.coords[1])d===g.length||e()<a.minimumDrag?b.animate({top:"+="+e()},a.duration):r();else d===1||e()<
a.minimumDrag?b.animate({top:"-="+e()},a.duration):s();a.afterStop.apply(b,arguments)}})}n.append(b);l.replaceWith(n);this.getPageIndex=function(){return d-1};this.getPageCount=function(){return g.length};this.flipForward=function(){if(d!==g.length)if(a.direction.toLowerCase()==="horizontal")p();else a.direction.toLowerCase()==="vertical"&&r()};this.flipBackward=function(){if(d!==1)if(a.direction.toLowerCase()==="horizontal")q();else a.direction.toLowerCase()==="vertical"&&s()}}})}})(jQuery);
